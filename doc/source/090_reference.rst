=====================
File Format Reference
=====================

This page provides a reference to the various input and file structures provided by BenchPRO.


Environment Variables
---------------------

BenchPRO uses environment variables to configure paths and behaviour. Variables with prefix 'BP_' are user facing and editable via the setting overload mechanism detailed :ref:`here <settings>`. The variables with 'BPS_' prefix are used internally and should not be editted by the user.

.. _variables:

+----------------------------+------------------------------------------------------------------------------------------+
| Variable                   | Description                                                                              |
+============================+==========================================================================================+
| $BPS_BIN                   | BenchPRO binaries, added to $PATH                                                        |
+----------------------------+------------------------------------------------------------------------------------------+
| $BPS_COLLECT               | BenchPRO's result collection blackhole; used to cache results to be pushed to database.  |
+----------------------------+------------------------------------------------------------------------------------------+
| $BPS_HOME                  | BenchPRO package installation directory.                                                 |
+----------------------------+------------------------------------------------------------------------------------------+
| $BPS_INC                   | Site directory containing examples and configuration files.                              |
+----------------------------+------------------------------------------------------------------------------------------+
| $BPS_LOG                   | Log file from package installation.                                                      |
+----------------------------+------------------------------------------------------------------------------------------+
| $BPS_MODULES               | Path to BenchPRO's modulefiles directory.                                                |
+----------------------------+------------------------------------------------------------------------------------------+
| $BPS_SYSTEM                | System label.                                                                            |
+----------------------------+------------------------------------------------------------------------------------------+
| $BPS_VERSION               | Version information.                                                                     |
+----------------------------+------------------------------------------------------------------------------------------+
| $BPS_VERSION_STR           | Version information, including build ID hash.                                            |
+----------------------------+------------------------------------------------------------------------------------------+
| $BP_HOME                   | User file path [Default= $HOME/benchpro].                                                |
+----------------------------+------------------------------------------------------------------------------------------+
| $BP_APPS                   | Application install root directory.                                                      |
+----------------------------+------------------------------------------------------------------------------------------+
| $BP_RESULTS                | Benchmark root directory.                                                                |
+----------------------------+------------------------------------------------------------------------------------------+
| $BP_REPO                   | Local file repository directory.                                                         |
+----------------------------+------------------------------------------------------------------------------------------+




.. _layout:

User files layout
-----------------

The file structure of the BenchPRO user directory is configured as follows:

.. code-block::

    ./benchpro
    ├── bench
    │   ├── config
    │   └── template
    ├── build
    │   ├── config
    │   └── template
    ├── log
    ├── resources
    │   └── scripts
    │       └── results
    └── user.ini

.. _arguments:

Input Arguments 
---------------

+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| Long Option                                   | Short Option  | Description                                                                   |
+===============================================+===============+===============================================================================+
| \-\-help                                        | \-h            | Print usage info.                                                             |  
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-validate                                    | \-V            | Confirm the installation is correctly configured.                             |
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-clean                                       | \-c            | Remove logs and other temp files left after an execption.                     |
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-avail                                       | \-a            | Print the available application and benchmark profiles.                       |
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-build [LABEL]                               | \-b            | Compile an available application.                                             |
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-listApps                                    | \-la           | Print a list of currently installed applications.                             |
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-queryApp [LABEL]                            | \-qa           | Print compilation information for an installed app.                           |
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-delApp [LABEL]                              | \-da           | Remove application installation matching inpout.                              |
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-bench [LABEL]                               | \-B            | Run a benchmark.                                                              |
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-sched [LABEL]                               |               | Use with '--build' or '--bench' to specify a custom scheduler config file.    |
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-listResults [all/pending/captured/failed]   | \-lr           | List all benchmark results in requested state.                                |
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-queryResult [LABEL]                         | \-qr           | Print config and result of a benchmark run.                                   |
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-capture                                     | \-C            | Validate and capture all pending results to the database.                     |
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-dbResult [all/LIST]                         |               | Display results matching comma delimited key-value search list.               |
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-dbApp [APPID]                               |               | Display application details                                                   |
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-delResult [all/captured/failed/LABEL]       | \-dr           | Remove local benchmark results matching input criteria.                       |
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+
| \-\-overload [LIST]                             | \-o            | Replace options read from file, acceptes a comma delimited list of key-values.|
+-----------------------------------------------+---------------+-------------------------------------------------------------------------------+

Global settings
---------------

Global settings are defined in the file :code:`$BP_HOME/user.ini`

+--------------------+----------------------------+-------------------------------------------------------------------------+
| Key                | Default value              | Description                                                             |
+====================+============================+=========================================================================+
| **[paths]**                                                                                                               |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| home_path          | $BP_HOME                   | Environment variable for user file directory.                           |  
+--------------------+----------------------------+-------------------------------------------------------------------------+
| build_path         | $BP_APPS                   | Environment variable for user application root directory.               |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| bench_path         | $BP_RESULTS                | Environment variable for user benchmark result root directory.          |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| **[general]**                                                                                                             |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| dry_run            | False                      | Generates job script but does not submit it, useful for testing.        |                                            
+--------------------+----------------------------+-------------------------------------------------------------------------+
| debug              | True                       | Prints additional nonessential messages.                                |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| timeout            | 2                          | Delay in seconds after warning and before file deletion event.          |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| sl                 | /                          | Filesystem separator.                                                   |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| sched_mpi          | ibrun                      | MPI exec command used within scheduler job.                             |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| local_mpi          | mpirun                     | MPI exec command used during local execution mode.                      |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| tree_depth         | 6                          | Depth of application installation tree.                                 |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| project_env_var    | $BP_HOME                   | BenchPRO's working directory environment variable (for output msgs).    |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| log_dir            | ./log                      | Log file subdirectory                                                   |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| mpi_blacklist      | login,staff                | Hostnames containing these strings are forbidden from executing MPI     |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| clean_on_fail      | True                       | BenchPRO will cleanup files when encountering an error.                 |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| **[system]**                                                                                                              |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| system_env         | $TACC_SYSTEM               | Environment variable contained system label (eg: frontera).             | 
+--------------------+----------------------------+-------------------------------------------------------------------------+
| apply_system_rules | True                       | BenchPRO will enforce rules in $BP_HOME/config/rules/[system].cfg       |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| rules_dir          | rules                      | Rules subdirectory.                                                     |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| **[staging]**                                                                                                             |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| local_repo_env     | $BP_REPO                   | Local file repository.                                                  |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| cache_downloads    | True                       | BenchPRO will store downloaded files in $BP_REPO.                       |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| prefer_local_files | True                       | If cached file is available, use that.                                  |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| sync_staging       | False                      | If true, wait for files to stage. Otherwise files stage inside the job. | 
+--------------------+----------------------------+-------------------------------------------------------------------------+
| **[config]**                                                                                                              |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| config_dir         | ./config                   | Configuration file subdirectory.                                        |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| build_cfg_dir      | build                      | Application build sub-subdirectory.                                     |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| bench_cfg_dir      | bench                      | Benchmark sub-subdirectory.                                             |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| sched_cfg_dir      | sched                      | Scheduler sub-subdirectory.                                             |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| system_cfg_file    | system.cfg                 | Configuration file containing system info.                              |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| arch_cfg_file      | architecture_defaults.cfg  | Configuration file containing architecture info.                        |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| compile_cfg_file   | compiler.cfg               | Configuration file containing compiler info.                            |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| **[templates]**                                                                                                           |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| exit_on_missing    | True                       | BenchPRO will quit if a template variable cannot be populated.          |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| template_dir       | ./templates                | Script template subdirectory.                                           | 
+--------------------+----------------------------+-------------------------------------------------------------------------+
| build_tmpl_dir     | build                      | Application build template sub-subdirectory.                            |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| sched_tmpl_dir     | sched                      | Scheduler template sub-subdirectory.                                    |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| bench_tmpl_dir     | bench                      | Benchmark template sub-subdirectory.                                    |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| compile_tmpl_file  | compiler.template          | Compiler command template filename.                                     |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| pid_dep_file       | pid_dependency.template    | Process dependency template filename.                                   |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| header_file        | header.template            | BenchPRO job header template filename.                                  |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| **[builder]**                                                                                                             |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| app_env_var        | $BP_APPS                   | Environment variable for application                                    |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| build_job_file     | build.job                  | Filename application build scripts.                                     | 
+--------------------+----------------------------+-------------------------------------------------------------------------+
| overwrite          | False                      | Will delete and reinstall over existing matching installation if True.  |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| build_mode         | sched                      | Accepts 'sched' or 'local', execution mode for build jobs.              |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| build_subdir       | build                      | Working subdirectory for build process                                  |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| install_subdir     | install                    | Installation subdirectory for installed application: configure --prefix |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| build_log_file     | build                      | Filename of build log.                                                  |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| build_report_file  | build_report.txt           | Filename of build report.                                               |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| max_build_jobs     | 5                          | Maximum number of concurrently running build jobs in scheduler.         |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| check_modules      | True                       | Check if modules specified in config file are available on the system.  |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| **[bencher]**                                                                                                             |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| result_env_var     | $BP_RESULTS                | Environment variable for results root directory.                        |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| bench_job_file     | bench.job                  | Filename for benchmark job script.                                      |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| bench_mode         | sched                      | Accepts 'sched' or 'local', execution mode for benchmark jobs.          |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| check_exe          | True                       | Confirm the application executable is found before stating benchmark.   |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| build_if_missing   | True                       | Launch a build job if the benchmark's dependent application is missing. |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| bench_log_file     | bench                      | Filename of benchmark log.                                              |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| bench_report_file  | bench_report.txt           | Filename of benchmark report.                                           |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| output_file        | output.log                 | File to redirect stdout.                                                |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| **[results]**                                                                                                             |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| move_failed_result | True                       | Move benchmark directory to failed subdirectory if capture fails.       |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| result_scripts_dir | results                    | Subdirectory under $BP_HOME/resources containing result parsing script. |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| results_log_file   | capture                    | Filename of capture log.                                                |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| pending_subdir     | pending                    | $BP_RESULTS subdirectory for pending benchmarks.                        |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| captured_subdir    | captured                   | $BP_RESULTS subdirectory for successfully caputred benchmarks.          |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| failed_subdir      | failed                     | $BP_RESULTS subdirectory for benchmarks that failed to capture to db.   |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| **[database]**                                                                                                            |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| db_host            | benchpro.tacc.utexas.edu   | Database server hostname.                                               |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| db_name            | bench_db                   | Database name.                                                          |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| db_user            | postgres                   | Database user.                                                          |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| db_passwd          | postgres                   | Database user password.                                                 |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| app_table          | results_application        | Application table name.                                                 |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| result_table       | results_result             | Result table name.                                                      |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| file_copy_handler  | cp                         | Command for moving results to destination.                              |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| collection_path    | $BPS_HOME/collection        | Blackhole, will periodically be imported to database by site admin.     |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| **[resources]**                                                                                                           |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| resource_dir       | ./resources                | Resource subdirectory.                                                  |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| script_subdir      | scripts                    | Script sub-subdirectory.                                                |
+--------------------+----------------------------+-------------------------------------------------------------------------+
| hw_utils_subdir    | hw_utils                   | Hardware statistics script sub-subdirectory.                            |
+--------------------+----------------------------+-------------------------------------------------------------------------+

.. _app_config_fields:

Application config files
------------------------

These config files contain parameters used to populate the application build template file, config files are broken in sections corresponding to general settings, system modules and configuration parameters.

+-------------------+-----------+----------------------------------------------------------------------------------+
| Label             | Required? | Description                                                                      |
+-------------------+-----------+----------------------------------------------------------------------------------+
| **[general]**                                                                                                    |
+-------------------+-----------+----------------------------------------------------------------------------------+
| code              | Y         | Application identifier.                                                          |
+-------------------+-----------+----------------------------------------------------------------------------------+
| version           | Y         | Application version label, accepts x.x, x-x, or strings like 'stable'.           |
+-------------------+-----------+----------------------------------------------------------------------------------+
| system            | N         | TACC system identifier, if left blank will use $TACC_SYSTEM.                     |
+-------------------+-----------+----------------------------------------------------------------------------------+
| build_prefix      | N         | Custom build (outside of default tree).                                          |
+-------------------+-----------+----------------------------------------------------------------------------------+
| template          | N         | Overwrite default build template file.                                           | 
+-------------------+-----------+----------------------------------------------------------------------------------+
| module_use        | N         | Path to be added to MODULEPATH, for using nonstandard modules.                   |
+-------------------+-----------+----------------------------------------------------------------------------------+
| sched_cfg         | N         | Name of nonstandard scheduler config file to use.                                |
+-------------------+-----------+----------------------------------------------------------------------------------+
| **[modules]**     |          NOTE: user may add as many custom fields to this section as needed.                 |
+-------------------+-----------+----------------------------------------------------------------------------------+
| compiler          | Y         | Module name of compiler, eg: 'intel/18.0.2' or just 'intel' for default.         |
+-------------------+-----------+----------------------------------------------------------------------------------+
| mpi               | Y         | Module name of MPI, eg: 'impi/18.0.2' or just 'impi' for default.                |
+-------------------+-----------+----------------------------------------------------------------------------------+
| **[config]**      |          NOTE: user may add as many fields to this section as needed.                        |
+-------------------+-----------+----------------------------------------------------------------------------------+
| arch              | N         | Generates architecture specific optimization flags. If left blank will use       |
|                   |           | system default, set to 'system' to combine with 'opt_flags' below                | 
+-------------------+-----------+----------------------------------------------------------------------------------+
| opt_flags         | N         | Used to add additional optimization flags, eg: '-g -ipo'  etc.  If arch is not   |
|                   |           |    set, this will be only optimization flags used.                               |
+-------------------+-----------+----------------------------------------------------------------------------------+
| build_label       | N         | Custom build label, replaces arch default eg: skylake-xeon. Required if          |
|                   |           | 'opt_flags' is set and 'arch' is not                                             |
+-------------------+-----------+----------------------------------------------------------------------------------+
| bin_dir           | N         | Path to executable within application directory, eg: bin, run etc.               | 
+-------------------+-----------+----------------------------------------------------------------------------------+
| exe               | Y         | Name of application executable, used to check compilation was successful.        |
+-------------------+-----------+----------------------------------------------------------------------------------+
| collect_hw_stats  | N         | Runs the hardware stats collection tool after build.                             |
+-------------------+-----------+----------------------------------------------------------------------------------+
| script_additions  | N         | Filename in $BP_HOME/templates, to be added to build script.                     |
+-------------------+-----------+----------------------------------------------------------------------------------+

Benchmark config file
---------------------

These config files contain parameters used to populate the benchmark template script. The file structure is:

+-----------------------+------------+----------------------------------------------------------------------------------+
| Label                 | Required?  | Description                                                                      |
+=======================+============+==================================================================================+
| **[requirements]**    |       NOTE: user may add as many fields to this section as needed.                            |
+-----------------------+------------+----------------------------------------------------------------------------------+
| code                  | N          | This benchmark requires an installed application matching code=""                |
+-----------------------+------------+----------------------------------------------------------------------------------+
| version               | N          | This benchmark requires an installed application matching version=""             |
+-----------------------+------------+----------------------------------------------------------------------------------+
| build_label           | N          | This benchmark requires an installed application matching build_label=""         |
+-----------------------+------------+----------------------------------------------------------------------------------+
| system                | N          | This benchmark requires an installed application matching system=""              |
+-----------------------+------------+----------------------------------------------------------------------------------+
| **[runtime]**                                                                                                         |
+-----------------------+------------+----------------------------------------------------------------------------------+
| nodes                 | Y          | Number of nodes on which to run, accepts comma-delimited list.                   |
+-----------------------+------------+----------------------------------------------------------------------------------+
| ranks_per_node        | N          | MPI ranks per node, accepts comma-delimited list.                                |
+-----------------------+------------+----------------------------------------------------------------------------------+
| threads               | N          | Threads per MPI rank, accepts comma-delimited list.                              |
+-----------------------+------------+----------------------------------------------------------------------------------+
| gpus                  | N          | Number of GPUs to run on, accepts comma-delimited list.                          | 
+-----------------------+------------+----------------------------------------------------------------------------------+
| max_running_jobs      | N          | Sets maximum number of concurrent running scheduler jobs.                        |
+-----------------------+------------+----------------------------------------------------------------------------------+
| hostlist              | Depends    | Either hostlist or hostfile required if on local system (bench_mode=local).      |
+-----------------------+------------+----------------------------------------------------------------------------------+
| hostfile              | Depends    |                                                                                  |    
+-----------------------+------------+----------------------------------------------------------------------------------+
| **[config]**          |        NOTE: user may add as many fields to this section as needed.                           |
+-----------------------+------------+----------------------------------------------------------------------------------+
| dataset               | Y          | Benchmark dataset label, used in ID string.                                      |
+-----------------------+------------+----------------------------------------------------------------------------------+
| exe                   | N          | Application executable.                                                          |
+-----------------------+------------+----------------------------------------------------------------------------------+
| bench_label           | N          | Optional naming string.                                                          |
+-----------------------+------------+----------------------------------------------------------------------------------+
| collect_hw_stats      | N          | Run hardware info collection after benchmark.                                    |
+-----------------------+------------+----------------------------------------------------------------------------------+
| script_additions      | N          | File in $BP_HOME/templates to add to benchmark job script.                       |
+-----------------------+------------+----------------------------------------------------------------------------------+
| arch                  | N          | Required architecture for this benchmark, e.g. cuda.                             |
+-----------------------+------------+----------------------------------------------------------------------------------+
| **[result]**                                                                                                          |
+-----------------------+------------+----------------------------------------------------------------------------------+
| description           | N          | Result explanation/description.                                                  |
+-----------------------+------------+----------------------------------------------------------------------------------+
| output_file           | N          | File to redirect stdout, if empty will use stdout for sched jobs, or             |
|                       |            | 'output_file' from user.ini for local job.                                   |
+-----------------------+------------+----------------------------------------------------------------------------------+
| method                | Y          | Results extraction method. Currently 'expr' or 'script' modes supported.         |
+-----------------------+------------+----------------------------------------------------------------------------------+
| expr                  | Depends    | Required if 'method=expr'. Expression for result extraction from file            | 
|                       |            | (Eg: "grep 'Performance' <file> | cut -d ' ' -f 2")".                            |
+-----------------------+------------+----------------------------------------------------------------------------------+
| script                | Depends    | Required if 'method=script'. Filename of script for result extraction.           |
+-----------------------+------------+----------------------------------------------------------------------------------+
| unit                  | Y          | Result units.                                                                    |
+-----------------------+------------+----------------------------------------------------------------------------------+


Directory structure
-------------------

+----------------------------+----------------------------------------------------------------------------------------------------+
| Directory                  | Purpose                                                                                            |
+============================+====================================================================================================+
| $BP_HOME/build             | config and template files for compiling applications.                                              |
+----------------------------+----------------------------------------------------------------------------------------------------+
| $BP_HOME/bench             | config and template files for running benchmarks.                                                  |
+----------------------------+----------------------------------------------------------------------------------------------------+
| $BP_HOME/log               | Build, bench and catpure log files.                                                                |
+----------------------------+----------------------------------------------------------------------------------------------------+
| $BP_HOME/resources         | Contains useful content including modulefiles, hardware collection and result validation scripts.  |
+----------------------------+----------------------------------------------------------------------------------------------------+


===================
Database Structures
===================

Application database
--------------------


+--------------+--------------------------+-----------+----------+
|   Column     |           Type           | Modifiers | Storage  |
+==============+==========================+===========+==========+
| code         | character varying(50)    | not null  | extended |              
+--------------+--------------------------+-----------+----------+
| version      | character varying(50)    | not null  | extended |              
+--------------+--------------------------+-----------+----------+
| system       | character varying(50)    | not null  | extended |              
+--------------+--------------------------+-----------+----------+
| compiler     | character varying(50)    | not null  | extended |              
+--------------+--------------------------+-----------+----------+
| mpi          | character varying(50)    | not null  | extended |              
+--------------+--------------------------+-----------+----------+
| modules      | character varying(200)   | not null  | extended |              
+--------------+--------------------------+-----------+----------+
| opt_flags    | character varying(200)   |           | extended |              
+--------------+--------------------------+-----------+----------+
| exe_file     | character varying(50)    | not null  | extended |              
+--------------+--------------------------+-----------+----------+
| build_prefix | character varying(200)   | not null  | extended |              
+--------------+--------------------------+-----------+----------+
| task_id      | character varying(50)    | not null  | extended |              
+--------------+--------------------------+-----------+----------+
| app_id       | character varying(50)    | not null  | extended |              
+--------------+--------------------------+-----------+----------+
| build_label  | character varying(50)    |           | extended |               
+--------------+--------------------------+-----------+----------+
| module_use   | character varying(100)   |           | extended |              
+--------------+--------------------------+-----------+----------+
| username     | character varying(50)    | not null  | extended |              
+--------------+--------------------------+-----------+----------+
| exec_mode    | character varying(100)   | not null  | extended |              
+--------------+--------------------------+-----------+----------+
| bin_dir      | character varying(50)    |           | extended |              
+--------------+--------------------------+-----------+----------+
| script       | character varying(50)    |           | extended |              
+--------------+--------------------------+-----------+----------+
| stderr       | character varying(50)    | not null  | extended |              
+--------------+--------------------------+-----------+----------+
| stdout       | character varying(50)    | not null  | extended |              
+--------------+--------------------------+-----------+----------+
| elapsed_time | integer                  |           | plain    |              
+--------------+--------------------------+-----------+----------+
| end_time     | timestamp with time zone |           | plain    |              
+--------------+--------------------------+-----------+----------+
| submit_time  | timestamp with time zone | not null  | plain    |              
+--------------+--------------------------+-----------+----------+


Results database
----------------

+---------------+--------------------------+-----------+----------+
|   Column      |           Type           | Modifiers | Storage  |
+===============+==========================+===========+==========+
| username      | character varying(50)    | not null  | extended |              
+---------------+--------------------------+-----------+----------+
| system        | character varying(50)    | not null  | extended |              
+---------------+--------------------------+-----------+----------+
| submit_time   | timestamp with time zone | not null  | plain    |              
+---------------+--------------------------+-----------+----------+
| task_id       | character varying(50)    | not null  | extended |              
+---------------+--------------------------+-----------+----------+
| nodes         | integer                  | not null  | plain    |              
+---------------+--------------------------+-----------+----------+
| ranks         | integer                  | not null  | plain    |              
+---------------+--------------------------+-----------+----------+
| threads       | integer                  | not null  | plain    |              
+---------------+--------------------------+-----------+----------+
| dataset       | character varying(50)    | not null  | extended |              
+---------------+--------------------------+-----------+----------+
| result        | numeric(20,3)            | not null  | main     |              
+---------------+--------------------------+-----------+----------+
| result_unit   | character varying(50)    | not null  | extended |              
+---------------+--------------------------+-----------+----------+
| resource_path | character varying(100)   | not null  | extended |              
+---------------+--------------------------+-----------+----------+
| nodelist      | character varying(1000)  | not null  | extended |              
+---------------+--------------------------+-----------+----------+
| description   | character varying(100)   | not null  | extended |              
+---------------+--------------------------+-----------+----------+
| elapsed_time  | integer                  |           | plain    |              
+---------------+--------------------------+-----------+----------+
| end_time      | timestamp with time zone |           | plain    |              
+---------------+--------------------------+-----------+----------+
| capture_time  | timestamp with time zone | not null  | plain    |              
+---------------+--------------------------+-----------+----------+
| job_status    | character varying(100)   | not null  | extended |              
+---------------+--------------------------+-----------+----------+
| app_id        | character varying(50)    | not null  | extended |              
+---------------+--------------------------+-----------+----------+
| gpus          | integer                  | not null  | plain    |              
+---------------+--------------------------+-----------+----------+
| exec_mode     | character varying(100)   | not null  | extended |              
+---------------+--------------------------+-----------+----------+


