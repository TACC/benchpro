


You are running an old (incompatible) version of BenchPRO!


        if out_of_date_user:
    You appear to be an existing user? (at least you have a $HOME/benchpro/config, so that's cool.)
    Please complete this one-time migrate step to the newest and (far better) BenchPRO 1.6.0.
    We're going to need you to backup your old application and benchmkark files so that they will survive the purge step later...
    >   mv ~/benchpro ~/benchpro.old
    

        else:

    You look new round here?
    Please complete this one-time initialization step to the newest and (far better) BenchPRO 1.6.0.
    You should head over to the docs and run through setting up BenchPRO in \"User Setup\":
         https://benchpro.readthedocs.io/en/latest/070_user_setup.html
    
    Then building LAMMPS and running the LJ-Melt benchmark in \"New User Guide\":
         https://benchpro.readthedocs.io/en/latest/010_user_guide.html
    


1. You will have to remove any existing applications and benchmarks installed with BenchPRO (unfortunately), do this with:
>   bp --purge


2.A. If you are a non TACC staff member without SSH keys to https://github.com/TACC/benchpro
    Grab the new restructured user file repo via HTTPS
>   git clone https://github.com/TACC/benchpro.git ~/benchpro

!__OR__! 

2.B. If you are a TACC staff member with SSH key access to https://github.com/TACC/benchpro
    Grab the new restructured user file repo via SSH key:
>   git clone https://github.com/TACC/csa.git ~/benchpro
Create a branch from main
>   cd ~/benchpro
>   git checkout -b [your_csa_branch_label] origin/main


3. Run the validator, which checks everything is correct, it also generates a directory structure under ~/benchpro
>   bp --validate



BP! TACC staff can now [add your application](https://benchpro.readthedocs.io/en/latest/020_add_app.html)
and [add your benchmark](https://benchpro.readthedocs.io/en/latest/030_add_bench.html) .cfg and .template files, then push to your branch:
>   git add .
>   git commit -m '[csa-branch] profile updates' 
Refer to recommended branch naming convention below.
Then create a pull request for your new branch. Once the branches are created I can elevate privileges for staff to push to their respective branches.


4.A You can continue as an un-affiliated BenchPRO user - doing work unrelated to LCCF CSA.
    In this case you can work from the main branch.

!__OR__! 

4.B If you are a CSA group member, contact your TACC support liaison to create your CSA branch.
    or try:
>   cd $BP_HOME
>   git fetch
>   checkout -b [csa_branch_label] origin/main
>   git pull
Refer to recommended branch naming convention below.


5. Generate your directory structure by running the validator:
>   bp --validate
6. You now have a new $BP_HOME file structure created for you.
The file $BP_HOME/settings.ini contains key-value pairs, under your control, that can 'overwrite' the system level defined defaults.
TLDR: these permanent 'overwrite' key-values can be applied to ANY parameter within BenchPRO, e.g:
    parameters like: 'queue', 'benchmark_label', $git_tag, 'version', 'dataset', 'runtime', 'nodes', 'ranks_per_node', 'OMP_NUM_THREADS', etc.
key-value pairs in $BP_HOME/settings.ini will be enforced/overwritten where ever needed, and an error will be raise if a overwriting key-value pair goes unused.
Run 'bp --defaults' for more info.


7. If you are an existing user and backed up your CSA's application and benchmark .cfg and .template files to ~/benchpro.old, now's the time to restore them.
(NOTE: the directroy structure for these files has changed by popular request):
>   cp ~/benchpro.old/config/build/[app.cfg] ~/benchpro/build/config/
>   cp ~/benchpro.old/template/bench/[app.cfg] ~/benchpro/bench/config/


8. Confirm your application was copied correctly and is visible to BenchPRO with:
>   bp -a
(under the \"$BP_HOME/build/config:\" section)


9. Now you can rebuild your application, or get more walkthrough info at:
   https://benchpro.readthedocs.io/en/latest



10. In order to share files between members of you CSA group, I suggest you checkout your own branch.
Only TACC staff that have SSH keys setup to access https://github.com/TACC/benchpro can push.

Here is a proposed naming convention for each CSA group:
--------------
  csa-amaro
  csa-bodony
  csa-chelikowsky
  csa-choi
  csa-chong
  csa-cui
  csa-gabriel
  csa-gettelman
  csa-giustino
  csa-gottlieb
  csa-gurnis
  csa-norman
  csa-orf
  csa-quinn
  csa-rahnemoonfar
  csa-riedel
  csa-stone
  csa-tajkhorshid
  csa-wang
  csa-yeung
--------------


11. Please confirm your branch and do NOT create merge requests to origin/main. I will be upset.


12. You can squash this message with export BP_NOTICE=0

13. Continue by printing your available BenchPRO profiles:
> bp --avail

14. You can now build the reference LAMMPS application with:
>  bp -b lammps -o queue=debug
(the debug queue is for TACC staff only, users leave that off)
